<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras - FERREMAS</title>
    <link rel="stylesheet" href="../static/css/cart.css">
</head>

<body>
    <div class="container">
        <div class="cart-header">
            <button class="btn-back" onclick="window.location.href='/product_detail.html'">
                <span>‚¨Ö</span> Volver
            </button>
            <h1>Carrito de Compras</h1>
            <div></div> <!-- Spacer para centrar el t√≠tulo -->
        </div>

        <!-- Mensaje del carrito (se muestra cuando est√° vac√≠o) -->
        <div class="cart-message">
            {{mensaje_carrito}}
        </div>

        <!-- Tabla del carrito (solo se muestra si hay productos) -->
        <table class="cart-table">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {{productos}}
            </tbody>
        </table>

        <!-- Total y bot√≥n de checkout -->
        <div class="cart-total">
            <span class="total-label">Total:</span>
            <span class="total-amount">{{total}}</span>
        </div>

        <a href="/checkout" class="checkout-button">
            üõí Continuar con la compra
        </a>
    </div>

    <script>
        // Ocultar tabla y mostrar mensaje si el carrito est√° vac√≠o
        document.addEventListener('DOMContentLoaded', function() {
            const mensajeCarrito = document.querySelector('.cart-message').innerHTML.trim();
            const tabla = document.querySelector('.cart-table');
            const cartTotal = document.querySelector('.cart-total');
            const checkoutButton = document.querySelector('.checkout-button');
            
            if (mensajeCarrito.includes('vac√≠o') || mensajeCarrito.includes('empty')) {
                tabla.style.display = 'none';
                cartTotal.style.display = 'none';
                checkoutButton.style.display = 'none';
                
                // Agregar clase para estilo de carrito vac√≠o
                document.querySelector('.cart-message').classList.add('empty-cart');
                document.querySelector('.cart-message').innerHTML = `
                    <h2>üõí Tu carrito est√° vac√≠o</h2>
                    <p>¬°Explora nuestro cat√°logo y encuentra productos incre√≠bles!</p>
                    <a href="/catalog" class="btn-catalog">Ver Cat√°logo</a>
                `;
            } else {
                document.querySelector('.cart-message').style.display = 'none';
            }
        });

        // Funci√≥n para confirmar eliminaci√≥n de productos
        function confirmarEliminacion(codigo, nombre) {
            if (confirm(`¬øEst√°s seguro de que deseas eliminar "${nombre}" del carrito?`)) {
                window.location.href = `/cart?eliminar=${codigo}`;
            }
        }

        // Animaci√≥n suave para los botones de cantidad
        document.addEventListener('DOMContentLoaded', function() {
            const quantityButtons = document.querySelectorAll('.quantity-controls a');
            
            quantityButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // Efecto visual al hacer clic
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                });
            });
        });
    </script>
</body>

</html>